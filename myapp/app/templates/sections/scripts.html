<!-- app/templates/sections/scripts.html -->

<h2 class="text-2xl font-semibold mb-4">üîß Scripts Personnalis√©s</h2>
<p class="text-gray-600 italic mb-4">G√©rez vos scripts personnalis√©s ici.</p>

<!-- Formulaire d'ajout -->
<form action="/add-script" method="post" class="mb-6 flex flex-col gap-2">
  <input type="text" name="script_name" placeholder="Nom du script (ex: backup.sh)" class="border rounded px-2 py-1" required>
  <textarea name="script_content" rows="3" placeholder="Contenu du script..." class="border rounded px-2 py-1" required></textarea>
  <input type="submit" value="‚ûï Ajouter" class="bg-green-600 text-white px-4 py-1 rounded self-start">
</form>

<!-- Liste des scripts -->
<ul class="space-y-3">
  {% for script in scripts %}
    <li class="relative group bg-gray-50 border px-4 py-2 rounded shadow hover:bg-gray-100">
      <div class="flex justify-between items-center">
        <span class="font-mono text-sm">{{ script.name }}</span>
        <div class="flex gap-2">
          <form action="/run-script" method="post">
            <input type="hidden" name="script_name" value="{{ script.name }}">
            <input type="submit" value="‚ñ∂Ô∏è" class="text-green-600 font-semibold">
          </form>
          <a href="/edit?name={{ script.name }}" class="text-yellow-600 font-semibold">‚úèÔ∏è</a>
          <form action="/delete-script" method="post">
            <input type="hidden" name="script_name" value="{{ script.name }}">
            <input type="submit" value="üóëÔ∏è" class="text-red-600 font-semibold">
          </form>
        </div>
      </div>
      {% if script.desc %}
        <div class="absolute top-full left-0 mt-1 bg-white text-sm text-gray-600 border rounded shadow px-3 py-2 w-max opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10">
          {{ script.desc }}
        </div>
      {% endif %}
    </li>
  {% else %}
    <li class="italic text-gray-500">Aucun script disponible.</li>
  {% endfor %}
</ul>